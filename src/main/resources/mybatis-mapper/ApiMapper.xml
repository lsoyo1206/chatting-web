<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="package com.example.chattingweb.api.repository.PostRepository">
    <!-- INSERT 쿼리문 -->
    <insert id="insertPostDto" parameterType="PostsDto" useGeneratedKeys="true" keyProperty="postId">
        INSERT INTO Posts (
                title,
                content,
                user_id
                <if test="visitedFriends != null">
                    , visited_friends
                </if>
                <if test="spaceId != null">
                    , location_registered
                </if>
        )
        VALUES (
                #{title},
                #{content},
                #{userId}
                <if test="visitedFriends != null">
                    , #{visitedFriends}
                </if>
                <if test="locationRegistered != false">
                    , true
                </if>
                )
    </insert>

    <insert id="insertSpaceDto" parameterType="SpaceDto" useGeneratedKeys="true" keyProperty="spaceId">
        INSERT INTO space (postId, spaceName, address, longitude, latitude)
        VALUES (#{postId}, #{spaceName}, #{address}, #{longitude}, #{latitude})
    </insert>
</mapper>